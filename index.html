<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Livraria Construtiva</title>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9593270296843431"
     crossorigin="anonymous"></script>
     
<style>
/* Reset e base */
* {margin:0; padding:0; box-sizing:border-box;}
body {
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color:#333;
  overflow-x:hidden;
  background: linear-gradient(135deg,#fdf6e3,#ffd54f);
  padding-top:160px; /* espa√ßo total para header + barra de pesquisa */
}

/* Header */
header {
  position:fixed;
  top:0; left:0; right:0;
  background:#FF5722;
  color:white;
  padding:0.6rem 1rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  z-index:1000;
  box-shadow:0 4px 8px rgba(0,0,0,0.1);
}
header h1 {font-size:1.4rem;}
nav a {
  display:inline-block;
  padding:6px 12px;
  margin:0 4px;
  background:linear-gradient(45deg,#FF5722,#FF9800);
  color:white;
  border-radius:20px;
  font-weight:600;
  font-size:0.9rem;
  text-decoration:none;
  box-shadow:0 3px 8px rgba(0,0,0,0.2);
  transition:all 0.3s;
}
nav a:hover {
  transform:translateY(-1px);
  box-shadow:0 5px 12px rgba(0,0,0,0.3);
  background:linear-gradient(45deg,#FF7043,#FF8A65);
}

/* Barra de pesquisa */
#barra-pesquisa {
  position:fixed;
  top:60px;
  left:50%;
  transform:translateX(-50%);
  width:90%;
  max-width:400px;
  z-index:999;
}
#barra-pesquisa input[type="text"] {
  width:100%;
  padding:10px 15px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:1rem;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}

/* Footer */
footer {
  text-align:center;
  padding:1.5rem;
  color:#777;
  font-size:0.85rem;
  background:#FFCCBC;
  margin-top:2rem;
}

/* Se√ß√µes */
section {
  padding:40px 15px 60px 15px;
  min-height:70vh;
  text-align:center;
  transition:all 0.3s;
}
section h2 {margin-bottom:15px; font-size:1.6rem;}
section p {
  max-width:700px;
  margin:15px auto;
  padding:15px;
  background:white;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
  line-height:1.5;
}

/* Diferencia√ß√£o visual das se√ß√µes */
#home {background: linear-gradient(135deg,#fdf6e3,#ffd54f);}
#livros {background:#FFF8E1;}
#contato {background:#FFE0B2;}
#sobreLivraria {background:#FFCCBC;}
#sobreAutor {background:#FFAB91;}
#comoBaixar {background:#FF8A65; color:white;}

/* Bot√µes gerais */
button {
  font-size:0.9rem;
  font-weight:600;
  padding:10px 20px;
  border-radius:25px;
  border:none;
  background:linear-gradient(45deg,#FF5722,#FF9800);
  color:white;
  box-shadow:0 3px 10px rgba(0,0,0,0.3);
  transition:all 0.3s;
}
button:hover {
  transform:translateY(-1px);
  box-shadow:0 5px 12px rgba(0,0,0,0.4);
  background:linear-gradient(45deg,#FF7043,#FF8A65);
}

/* Bot√µes flutuantes e topo */
#btnFlutuanteEspecial, #btnTopo {
  display:none;
  position:fixed;
  font-weight:600;
  padding:10px 18px;
  border-radius:25px;
  box-shadow:0 3px 10px rgba(0,0,0,0.3);
  z-index:1002;
  background:#FF5722;
  color:white;
  border:none;
  cursor:pointer;
  transition:all 0.3s;
}
#btnFlutuanteEspecial {bottom:80px; right:30px; z-index:998;}
#btnTopo {bottom:30px; right:30px;}
#btnFlutuanteEspecial:hover, #btnTopo:hover {
  transform:translateY(-1px);
  box-shadow:0 5px 12px rgba(0,0,0,0.4);
  background:linear-gradient(45deg,#FF7043,#FF8A65);
}

/* Progress bar */
#progress-bar {
  position:fixed;
  top:0; left:0;
  height:3px;
  background:#FFC107;
  width:0;
  z-index:1001;
  transition:width 0.2s;
}

/* Livros grid */
#livros-container {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(140px,1fr));
  gap:12px;
  margin-top:10px;
}
.livro-card {
  background:white;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
  transition:transform 0.2s;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
}
.livro-card:hover {transform:translateY(-3px);}
.livro-card img {width:100%; height:180px; object-fit:cover;}
.livro-info {
  padding:0.6rem;
  flex:1;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
}
.livro-info h3 {font-size:0.9rem; margin-bottom:0.2rem; height:35px; overflow:hidden;}
.livro-info p {font-size:0.8rem; color:#555; margin-bottom:0.4rem; height:18px; overflow:hidden;}
.livro-info button {
  width:100%;
  padding:0.4rem;
  border:none;
  border-radius:6px;
  background:#FF5722;
  color:white;
  font-weight:600;
  cursor:pointer;
  transition:background 0.2s;
}
.livro-info button:hover {background:#E64A19;}

/* Filtros livros */
#filtros {
  margin-top:15px;
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:8px;
}
#filtros input, #filtros select {
  padding:10px 12px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:0.9rem;
  width:250px;
  max-width:95%;
  box-shadow:0 1px 6px rgba(0,0,0,0.1);
}

/* Contato links */
#contato a {
  color:#FF5722;
  text-decoration:none;
  font-weight:600;
  margin:0 4px;
  transition:color 0.3s;
}
#contato a:hover {color:#E64A19;}

/* Popup e modal */
#popup, #modal-download {
  display:none;
  position:fixed;
  top:50%; left:50%;
  transform:translate(-50%, -50%);
  background:white;
  padding:15px;
  border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
  z-index:2000;
  text-align:center;
}
#modal-download button {margin:5px;}

/* Se√ß√£o Como Baixar */
#comoBaixar h2 {color:white;}
#comoBaixar p {background:rgba(255,255,255,0.9); color:#333;}
#comoBaixar button {margin-top:10px;}

/* Garantia de conte√∫do vis√≠vel */
section, #filtros, #livros-container, #comoBaixar {
  position:relative;
  z-index:1;
}
</style>
</head>
<body>

<header>
  <h1>üìö Livraria Construtiva</h1>
  <nav>
    <a href="#" onclick="mostrarSecao('home')">Home</a>
    <a href="#" onclick="mostrarSecao('livros')">Livros</a>
    <a href="#" onclick="mostrarSecao('contato')">Contato</a>
    <a href="#" onclick="mostrarSecao('sobreLivraria')">Sobre a Livraria</a>
    <a href="#" onclick="mostrarSecao('sobreAutor')">Sobre o Autor</a>
    <a href="#" onclick="mostrarSecao('comoBaixar')">Como Baixar</a>
  </nav>
</header>

<div id="progress-bar"></div>
<button id="btnTopo" onclick="voltarTopo()">‚¨Ü Topo</button>

<section id="home" style="display:block;">
  <h2>üìö Bem-vindo √† Livraria Construtiva</h2>
  <p>Encontre livros gratuitos e comece a explorar!</p>
  <button id="btnLivros" onclick="mostrarSecao('livros')">üìñ Ver Livros</button>
  <br><br>
  <button id="btnHomeEspecial" style="margin-top:20px;padding:12px 24px;" onclick="abrirWhatsApp('Tens dispon√≠vel o Livro:')">Livros Especiais</button>
</section>

<section id="livros" style="display:none;">
  <h2>üìñ Livros</h2>
  <div id="filtros">
    <input type="text" id="busca" placeholder="Buscar por t√≠tulo ou autor...">
    <select id="categoria">
      <option value="">Todas as categorias</option>
      <option value="fiction">Fic√ß√£o</option>
      <option value="children">Infantil</option>
      <option value="science">Ci√™ncia</option>
      <option value="philosophy">Filosofia</option>
      <option value="history">Hist√≥ria</option>
    </select>
  </div>
  <main>
    <div id="livros-container"></div>
    <div id="loading">Carregando livros...</div>
  </main>
</section>

<section id="contato" style="display:none;">
  <h2>‚úâ Contato</h2>
  <p>Fale conosco via:</p>
  <p>
    <a href="https://www.facebook.com/profile.php?id=61583174369263" target="_blank">üìò Facebook</a> |
    <a href="https://wa.me/959622160?text=Ol√°! Quero saber mais sobre os livros" target="_blank">üí¨ WhatsApp</a> |
    <a href="mailto:jsacassole@gmail.com?subject=Contato Livraria Construtiva&body=Ol√°, gostaria de mais informa√ß√µes.">‚úâ E-mail</a>
  </p>
</section>

<section id="sobreLivraria" style="display:none;">
  <h2>üèõ Sobre a Livraria</h2>
  <p>A Livraria Construtiva nasceu com a miss√£o de disponibilizar livros gratuitos e de dom√≠nio p√∫blico para todos. Nossa biblioteca digital permite que voc√™ explore e baixe livros em diversos formatos, garantindo aprendizado e divers√£o!</p>
</section>

<section id="sobreAutor" style="display:none;">
  <h2>‚úç Sobre o Autor</h2>
  <p>O autor, Jo√£o Enoc Sacassole, √© apaixonado por educa√ß√£o e tecnologia, dedicando-se a disponibilizar conhecimento gratuito atrav√©s da Livraria Construtiva.</p>
</section>

<section id="comoBaixar" style="display:none;">
  <h2>‚¨á Como Baixar Livros</h2>
  <p>Para baixar um livro, basta clicar no bot√£o üì• ‚ÄúBaixar‚Äù abaixo do t√≠tulo desejado. Escolha o formato desejado (PDF, EPUB, TXT, RTF, DOC etc.) e seu download come√ßar√° automaticamente.</p>
</section>

<footer>
  <p>¬© 2025 Livraria Construtiva | Todos os livros s√£o gratuitos e de dom√≠nio p√∫blico</p>
</footer>

<div id="modal-download">
  <p>O download do livro come√ßar√° em breve:</p>
  <button id="btnDownload" onclick="fecharModal()">Fechar</button>
</div>

<script>
// Alternar se√ß√µes
function mostrarSecao(secao) {
  const secoes = ['home','livros','contato','sobreLivraria','sobreAutor','comoBaixar'];
  secoes.forEach(id => document.getElementById(id).style.display = (id===secao)?'block':'none');
  if(secao==='livros') carregarLivros();
  window.scrollTo({top:0, behavior:'smooth'});
}

// Scroll, progress bar e bot√£o topo
const btnTopo = document.getElementById('btnTopo');
const progressBar = document.getElementById('progress-bar');
window.onscroll = function() {
  if(window.scrollY > 300) btnTopo.style.display='block'; else btnTopo.style.display='none';
  const total = document.documentElement.scrollHeight - window.innerHeight;
  progressBar.style.width = `${(window.scrollY/total)*100}%`;
};
function voltarTopo(){ window.scrollTo({top:0, behavior:'smooth'}); }

let pagina=1, carregando=false, termoBusca='', categoria='', livroAtual=null;
const container = document.getElementById('livros-container');
const loading = document.getElementById('loading');

function abrirModal(livro) {
  livroAtual = livro;
  const formatos = livro.formats;

  // Pegar todos os formatos de texto exceto html
  const extensoesPermitidas = ['application/pdf','application/epub+zip','text/plain','text/plain; charset=utf-8','application/rtf','application/msword','application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
  let link=null;
  for(const key in formatos){
    if(extensoesPermitidas.includes(key)){
      link = formatos[key];
      break;
    }
  }
  if(!link){ alert("Nenhum formato de texto dispon√≠vel para download."); return; }

  link = link.replace(/\.txt\.utf-8$/, '.txt');
  const a = document.createElement('a'); a.href = link; a.target="_blank";

  const ext = link.split('.').pop();
  a.download = livro.title.replace(/[^a-z0-9]/gi,'_') + '.' + ext;
  document.body.appendChild(a); a.click(); document.body.removeChild(a);
  document.getElementById('modal-download').style.display='block';
}
function fecharModal(){ document.getElementById('modal-download').style.display='none'; }

async function carregarLivros(){
  if(carregando) return;
  carregando=true; loading.style.display='block'; progressBar.style.width='30%';
  try{
    let url=`https://gutendex.com/books?languages=pt&page=${pagina}`;
    if(categoria) url+=`&topic=${categoria}`;
    if(termoBusca) url+=`&search=${encodeURIComponent(termoBusca)}`;
    const res=await fetch(url); const data=await res.json();
    const livros=data.results;
    if(pagina===1) container.innerHTML='';

    livros.forEach(livro => {
      const formatos = livro.formats;
      const idiomas = livro.languages;

      if(!idiomas.includes('pt')) return;

      const extensoesPermitidas = ['application/pdf','application/epub+zip','text/plain','text/plain; charset=utf-8','application/rtf','application/msword','application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
      let link=null;
      for(const key in formatos){
        if(extensoesPermitidas.includes(key)){
          link = formatos[key];
          break;
        }
      }
      if(!link) return;

      const capa = formatos['image/jpeg'] || 'https://via.placeholder.com/150x200?text=Sem+Capa';
      const autor = livro.authors.length ? livro.authors[0].name : 'Desconhecido';
      const card = document.createElement('div');
      card.className = 'livro-card';
      card.innerHTML = `<img src="${capa}" alt="${livro.title}"><div class="livro-info"><h3>${livro.title}</h3><p>${autor}</p><button onclick='abrirModal(${JSON.stringify(livro)})'>üì• Baixar</button></div>`;
      container.appendChild(card);
    });

    pagina++; carregando=false; progressBar.style.width='100%';
    setTimeout(()=>progressBar.style.width='0',300);
    if(!data.next) loading.innerText="Todos os livros carregados.";
  }catch(err){ 
    console.error(err); 
    loading.innerText="Erro ao carregar livros."; 
    carregando=false; 
    progressBar.style.width='0'; 
  }
}

document.getElementById('busca').addEventListener('input', e=>{
  termoBusca=e.target.value; pagina=1; container.innerHTML=''; carregarLivros();
});
document.getElementById('categoria').addEventListener('change', e=>{
  categoria=e.target.value; pagina=1; container.innerHTML=''; carregarLivros();
});

function abrirWhatsApp(mensagem){
  const numero = '959622160';
  const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;
  window.open(url,'_blank');
}

// Bot√£o flutuante especial
const btnFlutuante = document.getElementById('btnFlutuanteEspecial');
let timeoutFlutuante;
function mostrarBotaoFlutuante(){
  if(document.getElementById('livros').style.display==='block'){
    btnFlutuante.style.display='block';
    btnFlutuante.style.opacity='1';
    clearTimeout(timeoutFlutuante);
    timeoutFlutuante = setTimeout(()=>{
      btnFlutuante.style.opacity='0';
      setTimeout(()=>btnFlutuante.style.display='none',300);
    },5000);
  }
}
window.addEventListener('scroll', mostrarBotaoFlutuante);
window.addEventListener('touchstart', mostrarBotaoFlutuante);

// Inicializar livros ao carregar a p√°gina
carregarLivros();
</script>
</body>
</html>